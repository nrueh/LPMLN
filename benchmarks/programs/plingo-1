#!/bin/bash


ROOT="$1""/"
INSTANCE=$2
OPT=$3
APP=$4
DOM=$5
EXTRA=$6
# MODELS=$6
# CONSTRAINT=$7
# CLINGO_ARGS=$8
# FORCE_TRANSLATE=$(9)
: ${CLINGO_ARGS:=''}

PATH_FROM_PLINGO_TO_ROOT="systems/benchmark-tool/"
PATH_FROM_ROOT_TO_PLINGO="../../../"


INSTANCE=${INSTANCE#"$ROOT"}
INSTANCE=${INSTANCE#"$PATH_FROM_ROOT_TO_PLINGO"}
INSTANCE=${PATH_FROM_PLINGO_TO_ROOT}${INSTANCE}

pwd
echo "( cd $ROOT ; cd $PATH_FROM_ROOT_TO_PLINGO/benchmarks ; make $OPT APP=$APP DOM=$DOM INS=$INSTANCE EXTRA='$EXTRA ')"
( cd $ROOT ; cd $PATH_FROM_ROOT_TO_PLINGO/benchmarks ; timeout 1200s make $OPT APP=$APP DOM=$DOM INS=$INSTANCE EXTRA="$EXTRA " -i )
